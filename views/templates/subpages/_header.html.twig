<header id="header">
    <div class="rect">
        {# Section gauche : Avatar + Titre #}
        <div class="header-left">
            {# Avatar #}
            <figure class="avatar-container">
                {% if user is not defined or not user %}
                    {# Utilisateur non connecté #}
                    <img class="avatar" src="assets/img/avatars/chatFiligranne.svg" alt="Logo Miaou, mascotte du site">
                {% elseif user.role ==2 %}
                    {# utilisateur connecté et admin #}
                    <img class="avatar" src="assets/img/avatars/admin.svg" alt="Logo Miaou, mascotte du site">
                {% else %}
                    {# Utilisateur connecté #}
                    <img class="avatar" src="{{ avatar.urlMini }}" alt="{{ avatar.description }}">

                {% endif %}
            </figure>
            
            {# Titre #}
            {% if user is defined and user and user.firstname is defined and user.firstname %}
                <h1 class="site-title">{{ user.firstname }} joue avec Miaou</h1>
            {% else %}
                <h1 class="site-title">Apprendre avec Miaou</h1>
            {% endif %}
        </div>
        
        {# Section droite : Boutons d'action #}
        <div class="header-actions" role="group" aria-label="Actions utilisateur">
            {% if user is not defined or not user %}
                {# Utilisateur non connecté #}
                <a href="?route=login" class="action-button" aria-label="Se connecter">
                    <i class="fas fa-sign-in-alt" aria-hidden="true"></i>
                    <span>Se connecter</span>
                </a>
                <a href="?route=register" class="action-button btn-register" aria-label="S'inscrire">
                    <i class="fas fa-user-plus" aria-hidden="true"></i>
                    <span>S'inscrire</span>
                </a>
            {% elseif user.role == 2 %}
                {# Utilisateur admin #}
                <a href="?route=logout" class="action-button" aria-label="Se déconnecter">
                    <i class="fas fa-sign-out-alt" aria-hidden="true"></i>
                    <span>Déconnexion</span>
                </a>
                <a href="?route=dashboard" class="action-button btn-register" aria-label="Accéder au tableau de bord">
                    <i class="fas fa-cog" aria-hidden="true"></i>
                    <span>Admin</span>
                </a>
            {% elseif user.role == 1 and user.statut == 1 %}
                {# Utilisateur connecté et validé #}
                <a href="?route=logout" class="action-button" id="logout" aria-label="Se déconnecter">
                    <i class="fas fa-sign-out-alt" aria-hidden="true"></i>
                    <span>Déconnexion</span>
                </a>
                <a href="?route=profile" class="action-button btn-register" aria-label="Voir mon profil">
                    <i class="fas fa-user" aria-hidden="true"></i>
                    <span>Profil</span>
                </a>
            {% else %}
                {# Utilisateur connecté mais non validé #}
                <a href="?route=logout" class="action-button" aria-label="Se déconnecter">
                    <i class="fas fa-sign-out-alt" aria-hidden="true"></i>
                    <span>Déconnexion</span>
                </a>
            {% endif %}
        </div>
    </div>
    
    {# Menu burger (hors de la box, à gauche sur le fond noir) #}
    <button id="openBtn" class="burger-btn" aria-label="Ouvrir le menu de navigation" aria-expanded="false">
        {# <i class="fas fa-bars burger-icon" aria-hidden="true"></i> #}
         <img src="assets/img/Miaou/burgerMenu.svg" alt="Menu" class="burger-icon" aria-hidden="true">
    </button>
    
    {# Overlay désactivé pour garder les couleurs éclatantes #}
    <div class="cache" aria-hidden="true"></div>
</header>

{# Navigation principale #}
<nav id="nav" aria-label="Navigation principale">
    {% if user is not defined or not user %}
        {# Navigation publique #}
        <ul class="nav-links-container">
            <li>
                <a href="?route=homepage">Page accueil</a>
            </li>
            <li>
                <a href="?route=contact">Contact</a>
            </li>
        </ul>
    {% elseif user.role == 2 %}
        {# Navigation Admin #}
        <ul id="nav-links-container">
            <li>
                <a href="index.php?route=homepageUser">Accueil</a>
            </li>
            <li>
                <a href="index.php?route=contact">Contact</a>
            </li>
            <li>
                <a href="index.php?route=stories">Histoires</a>
            </li>
            <li>
                <a href="index.php?route=coloriages">Coloriages</a>
            </li>
            <li>
                <a href="index.php?route=displayGame">Jeux</a>
            </li>
        </ul>
    {% elseif user.role == 1 and user.statut == 1 %}
        {# Navigation Utilisateur validé #}
        <ul id="navUser-links-container">
            <li>
                <a href="index.php?route=homepage">Ma Page</a>
            </li>
            <li>
                <a href="index.php?route=contact">Contact</a>
            </li>   
            <li>
                <a href="index.php?route=stories">Histoires</a>
            </li>
            <li>
                <a href="index.php?route=coloriages">Coloriages</a>
            </li>  
            <li>
                <a href="index.php?route=games">Jeux</a>
            </li>
        </ul>
    {% else %}
        {# Navigation limitée #}
        <ul id="nav-links-container">
            <li>
                <a href="index.php?route=homepage">Accueil</a>
            </li>
            <li>
                <a href="index.php?route=contact">Contact</a>
            </li>
            {% if user.statut == 0 %}
                <li>
                    <span class="disabled" role="status" aria-live="polite">Compte en attente de validation</span>
                </li>
            {% elseif user.statut == 3 %}
                <li>
                    <span class="disabled" role="status" aria-live="polite">Compte suspendu</span>
                </li>
            {% endif %}
        </ul>
    {% endif %}
</nav>